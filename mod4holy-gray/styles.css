:root {
    --picasso-bg: #F2E3C6;      /* Color lienzo/papel viejo */
    --picasso-red: #D95D39;     /* Terracota */
    --picasso-blue: #4B6E8C;    /* Azul grisáceo */
    --picasso-yellow: #F2A900;  /* Amarillo Ocre */
    --picasso-black: #1a1a1a;   /* Negro tinta */
    --picasso-white: #ffffff;
    --border-thick: 4px solid var(--picasso-black);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: var(--picasso-bg);
    font-family: 'Courier Prime', monospace; /* Estilo mecanografiado */
    color: var(--picasso-black);
    overflow-x: hidden;
    /* Textura sutil de papel */
    background-image: radial-gradient(#d4c5a9 1px, transparent 1px);
    background-size: 20px 20px;
}

/* Formas flotantes abstractas (Pseudo-arte) */
.abstract-shape {
    position: fixed;
    z-index: -1;
    border: var(--border-thick);
}

.shape-1 {
    top: 10%;
    left: -50px;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    background: var(--picasso-yellow);
    opacity: 0.6;
}

.shape-2 {
    bottom: 20%;
    right: -20px;
    width: 300px;
    height: 150px;
    background: var(--picasso-red);
    transform: rotate(-15deg);
    clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
}

/* ==============================
   LAYOUT CUBISTA
   ============================== */
.holy-grail {
    display: grid;
    grid-template-areas:
        "header header header"
        "nav main sidebar"
        "footer footer footer";
    grid-template-columns: 220px 1fr 200px;
    grid-template-rows: auto 1fr auto;
    min-height: 100vh;
    gap: 1.5rem; /* Separación para que se noten las formas */
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
}

/* --- HEADER: El Polígono Superior --- */
.header {
    grid-area: header;
    background: var(--picasso-blue);
    color: var(--picasso-white);
    padding: 3rem 2rem;
    border: var(--border-thick);
    /* Forma irregular */
    clip-path: polygon(0% 5%, 100% 0%, 98% 90%, 2% 100%);
    transform: rotate(-1deg);
    box-shadow: 10px 10px 0px var(--picasso-black); /* Sombra sólida */
}

.header h1 {
    font-family: 'Playfair Display', serif;
    font-size: 3rem;
    text-transform: uppercase;
    letter-spacing: -2px;
    transform: skewX(-10deg); /* Texto inclinado */
}

/* --- NAV: La Columna Recortada --- */
.nav {
    grid-area: nav;
    background: var(--picasso-white);
    padding: 2rem;
    border: var(--border-thick);
    /* Borde redondeado irregular (blob) */
    border-radius: 5% 95% 5% 95% / 95% 5% 92% 8%;
    transform: rotate(2deg);
    box-shadow: -8px 8px 0px var(--picasso-yellow);
}

.nav h3 {
    border-bottom: 3px solid var(--picasso-black);
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
    text-align: right;
}

.nav ul {
    list-style: none;
}

.nav a {
    display: block;
    color: var(--picasso-black);
    text-decoration: none;
    font-weight: bold;
    padding: 10px;
    border: 2px solid transparent;
    transition: all 0.3s;
}

.nav a:hover {
    background: var(--picasso-black);
    color: var(--picasso-white);
    transform: scale(1.1) skewX(-10deg); /* Efecto dinámico */
}

/* --- MAIN: El Lienzo Central --- */
.main {
    grid-area: main;
    background: var(--picasso-white);
    padding: 3rem;
    border: var(--border-thick);
    /* Recorte en esquina estilo "foto rota" */
    clip-path: polygon(
        0% 0%, 
        100% 2%, 
        100% 100%, 
        85% 100%, 
        80% 95%, 
        0% 98%
    );
    position: relative;
    z-index: 10; /* Encima de otros elementos */
}

/* Elemento decorativo dentro del main (un "ojo" cubista) */
.main::before {
    content: '';
    position: absolute;
    top: -15px;
    right: -15px;
    width: 40px;
    height: 40px;
    background: var(--picasso-red);
    border: var(--border-thick);
    border-radius: 50%;
}

.main h2 {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    margin-bottom: 1.5rem;
    background: var(--picasso-yellow);
    display: inline-block;
    padding: 0.5rem 1rem;
    transform: rotate(-2deg);
    border: 2px solid var(--picasso-black);
}

.main p {
    font-size: 1.1rem;
    line-height: 1.8;
    margin-bottom: 1.5rem;
    text-align: justify;
}

/* --- SIDEBAR: Bloques Desapilados --- */
.sidebar {
    grid-area: sidebar;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.widget {
    background: var(--picasso-red);
    color: white;
    padding: 1.5rem;
    border: var(--border-thick);
    box-shadow: 6px 6px 0px var(--picasso-black);
}

.widget-1 {
    transform: skewY(-5deg); /* Distorsión vertical */
    border-radius: 10px 0 30px 0;
}

.widget-2 {
    background: var(--picasso-blue);
    transform: rotate(3deg) translateX(-10px); /* Desplazamiento */
    border-radius: 0 20px 0 20px;
}

/* --- FOOTER: La Base Sólida --- */
.footer {
    grid-area: footer;
    background: var(--picasso-black);
    color: var(--picasso-bg);
    padding: 2rem;
    text-align: center;
    border: 4px solid var(--picasso-bg);
    outline: 4px solid var(--picasso-black); /* Doble borde */
    transform: rotate(0.5deg);
    margin-top: 1rem;
    clip-path: polygon(2% 0%, 98% 10%, 100% 100%, 0% 100%);
}

/* ==============================
   RESPONSIVE (La deconstrucción vertical)
   ============================== */
@media (max-width: 768px) {
    .holy-grail {
        grid-template-areas:
            "header"
            "main"
            "nav"
            "sidebar"
            "footer";
        grid-template-columns: 1fr;
        grid-template-rows: auto;
        gap: 2rem;
        padding: 1rem;
    }

    .header {
        clip-path: none; /* Simplificar forma en móvil */
        transform: rotate(0deg);
        border-radius: 10px 10px 50% 10px;
    }

    .nav {
        transform: rotate(-2deg);
        order: 2; /* Cambiar orden visual si se desea */
    }

    .sidebar {
        flex-direction: row; /* Widgets lado a lado en móvil */
        gap: 0.5rem;
    }
    
    .widget {
        flex: 1;
        transform: none;
    }
}

/* =========================================
   MEDIA QUERIES: ADAPTACIÓN DEL LIENZO
   ========================================= */

/* --- TABLETS (max-width: 1024px) --- */
/* Pasamos a un diseño de 2 columnas. 
   El Sidebar baja, el Nav y el Main comparten espacio. */
@media (max-width: 1024px) {
    .holy-grail {
        grid-template-areas:
            "header header"
            "nav main"
            "sidebar sidebar"
            "footer footer";
        grid-template-columns: 200px 1fr; /* Nav fijo, contenido flexible */
        gap: 1rem;
    }

    /* En tablet, los widgets del sidebar se ponen uno al lado del otro */
    .sidebar {
        flex-direction: row;
        flex-wrap: wrap;
    }
    
    .widget {
        flex: 1;
        min-width: 200px;
    }
}

/* --- MÓVILES (max-width: 768px) --- */
/* Deconstrucción total a una sola columna */
@media (max-width: 768px) {
    
    .holy-grail {
        /* Todo en una columna */
        grid-template-areas:
            "header"
            "nav"
            "main"
            "sidebar"
            "footer";
        grid-template-columns: 1fr;
        grid-template-rows: auto; /* Altura automática según contenido */
        padding: 10px;
        gap: 1.5rem;
        overflow-x: hidden; /* Evita scroll lateral por las rotaciones */
    }

    /* --- HEADER MÓVIL --- */
    .header {
        /* Reducimos la rotación para no perder espacio */
        transform: rotate(0deg);
        /* Simplificamos el polígono para que quepa el texto */
        clip-path: polygon(0% 0%, 100% 0%, 100% 90%, 0% 100%);
        padding: 1.5rem;
        text-align: center;
    }

    .header h1 {
        font-size: 2rem; /* Texto más pequeño */
        transform: skewX(0deg); /* Quitamos la inclinación extrema */
    }

    /* --- NAV MÓVIL --- */
    .nav {
        transform: rotate(-1deg); /* Mantenemos una inclinación sutil */
        border-radius: 10px; /* Bordes menos agresivos */
        box-shadow: 4px 4px 0px var(--picasso-yellow); /* Sombra más pequeña */
        z-index: 20;
    }

    .nav ul {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
    }

    .nav h3 {
        text-align: center;
        border: none;
    }

    /* --- MAIN MÓVIL --- */
    .main {
        padding: 1.5rem;
        /* Quitamos el recorte complejo porque corta el texto si se hace wrap */
        clip-path: none; 
        /* Usamos border-radius irregular en su lugar */
        border-radius: 2px 20px 2px 25px;
        box-shadow: 5px 5px 0px var(--picasso-black);
    }
    
    /* Movemos el ojo decorativo para que no tape texto */
    .main::before {
        display: none; 
    }

    /* --- SIDEBAR & WIDGETS MÓVIL --- */
    .sidebar {
        flex-direction: column; /* Volvemos a columna en móvil estrecho */
        gap: 1rem;
    }

    .widget-1, .widget-2 {
        transform: none; /* Quitamos skew y rotate para legibilidad */
        border-radius: 8px;
        margin: 0;
    }

    /* --- FOOTER MÓVIL --- */
    .footer {
        clip-path: none;
        transform: rotate(0deg);
        border: var(--border-thick);
        margin-top: 0;
    }

    /* Ocultamos las formas abstractas de fondo en móvil para limpiar la vista */
    .abstract-shape {
        opacity: 0.2; /* O las hacemos muy tenues */
    }
}